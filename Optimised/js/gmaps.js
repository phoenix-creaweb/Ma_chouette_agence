"use strict";(function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(["jquery","googlemaps!"],b):a.GMaps=b()})(this,function(){var a=function(a,b){if(a===b)return a;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a},b=function(a,b){var c,d=Array.prototype.slice.call(arguments,2),f=[],g=a.length;if(Array.prototype.map&&a.map===Array.prototype.map)f=Array.prototype.map.call(a,function(a){var c=d.slice(0);return c.splice(0,0,a),b.apply(this,c)});else for(c=0;c<g;c++)callback_params=d,callback_params.splice(0,0,a[c]),f.push(b.apply(this,callback_params));return f},c=function(a){var b,c=[];for(b=0;b<a.length;b++)c=c.concat(a[b]);return c},d=function(a,b){var c=a[0],d=a[1];return b&&(c=a[1],d=a[0]),new google.maps.LatLng(c,d)},f=function(a,b){var c;for(c=0;c<a.length;c++)a[c]instanceof google.maps.LatLng||(a[c]=0<a[c].length&&"object"==typeof a[c][0]?f(a[c],b):d(a[c],b));return a},g=function(a,b){var c,d=a.replace(".","");return c="jQuery"in this&&b?$("."+d,b)[0]:document.getElementsByClassName(d)[0],c},h=function(a,b){var c,a=a.replace("#","");return c="jQuery"in window&&b?$("#"+a,b)[0]:document.getElementById(a),c},j=function(a){var b=0,c=0;if(a.getBoundingClientRect){var d=a.getBoundingClientRect(),f=-(window.scrollX?window.scrollX:window.pageXOffset),g=-(window.scrollY?window.scrollY:window.pageYOffset);return[d.left-f,d.top-g]}if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},k=function(){"use strict";var b=document,c=function(d){if(!("object"==typeof window.google&&window.google.maps))return"object"==typeof window.console&&window.console.error&&console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js."),function(){};if(!this)return new c(d);d.zoom=d.zoom||15,d.mapType=d.mapType||"roadmap";var f,k=function(a,b){return void 0===a?b:a},l=this,m=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],n=["mousemove","mouseout","mouseover"],o=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],p=d.el||d.div,q=d.markerClusterer,r=google.maps.MapTypeId[d.mapType.toUpperCase()],s=new google.maps.LatLng(d.lat,d.lng),t=k(d.zoomControl,!0),u=d.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},v=u.style||"DEFAULT",w=u.position||"TOP_LEFT",x=k(d.panControl,!0),y=k(d.mapTypeControl,!0),z=k(d.scaleControl,!0),A=k(d.streetViewControl,!0),B=k(B,!0),C={},D={zoom:this.zoom,center:s,mapTypeId:r},E={panControl:x,zoomControl:t,zoomControlOptions:{style:google.maps.ZoomControlStyle[v],position:google.maps.ControlPosition[w]},mapTypeControl:y,scaleControl:z,streetViewControl:A,overviewMapControl:B};if(this.el="string"==typeof d.el||"string"==typeof d.div?-1<p.indexOf("#")?h(p,d.context):g.apply(this,[p,d.context]):p,"undefined"==typeof this.el||null===this.el)throw"No element defined.";for(window.context_menu=window.context_menu||{},window.context_menu[l.el.id]={},this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=d.zoom,this.registered_events={},this.el.style.width=d.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=d.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=d.enableNewStyle,f=0;f<o.length;f++)delete d[o[f]];for(!0!=d.disableDefaultUI&&(D=a(D,E)),C=a(D,d),f=0;f<m.length;f++)delete C[m[f]];for(f=0;f<n.length;f++)delete C[n[f]];this.map=new google.maps.Map(this.el,C),q&&(this.markerClusterer=q.apply(this,[this.map]));var F=function(a,b){var c="",d=window.context_menu[l.el.id][a];for(var f in d)if(d.hasOwnProperty(f)){var g=d[f];c+="<li><a id=\""+a+"_"+f+"\" href=\"#\">"+g.title+"</a></li>"}if(h("gmaps_context_menu")){var k=h("gmaps_context_menu");k.innerHTML=c;var f,m=k.getElementsByTagName("a"),n=m.length;for(f=0;f<n;f++){var o=m[f],p=function(c){c.preventDefault(),d[this.id.replace(a+"_","")].action.apply(l,[b]),l.hideContextMenu()};google.maps.event.clearListeners(o,"click"),google.maps.event.addDomListenerOnce(o,"click",p,!1)}var q=j.apply(this,[l.el]),r=q[0]+b.pixel.x-15,s=q[1]+b.pixel.y-15;k.style.left=r+"px",k.style.top=s+"px"}};this.buildContextMenu=function(a,b){if("marker"===a){b.pixel={};var c=new google.maps.OverlayView;c.setMap(l.map),c.draw=function(){var d=c.getProjection(),f=b.marker.getPosition();b.pixel=d.fromLatLngToContainerPixel(f),F(a,b)}}else F(a,b);var d=h("gmaps_context_menu");setTimeout(function(){d.style.display="block"},0)},this.setContextMenu=function(a){window.context_menu[l.el.id][a.control]={};var c,d=b.createElement("ul");for(c in a.options)if(a.options.hasOwnProperty(c)){var f=a.options[c];window.context_menu[l.el.id][a.control][f.name]={title:f.title,action:f.action}}d.id="gmaps_context_menu",d.style.display="none",d.style.position="absolute",d.style.minWidth="100px",d.style.background="white",d.style.listStyle="none",d.style.padding="8px",d.style.boxShadow="2px 2px 6px #ccc",h("gmaps_context_menu")||b.body.appendChild(d);var g=h("gmaps_context_menu");google.maps.event.addDomListener(g,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){g.style.display="none"},400)},!1)},this.hideContextMenu=function(){var a=h("gmaps_context_menu");a&&(a.style.display="none")};var G=function(a,b){google.maps.event.addListener(a,b,function(a){null==a&&(a=this),d[b].apply(this,[a]),l.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var H,I=0;I<m.length;I++)H=m[I],H in d&&G(this.map,H);for(var H,I=0;I<n.length;I++)H=n[I],H in d&&G(this.map,H);google.maps.event.addListener(this.map,"rightclick",function(a){d.rightclick&&d.rightclick.apply(this,[a]),null!=window.context_menu[l.el.id].map&&l.buildContextMenu("map",a)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){var a,b=[],c=this.markers.length;for(a=0;a<c;a++)"boolean"==typeof this.markers[a].visible&&this.markers[a].visible&&b.push(this.markers[a].getPosition());this.fitLatLngBounds(b)},this.fitLatLngBounds=function(a){var b,c=a.length,d=new google.maps.LatLngBounds;for(b=0;b<c;b++)d.extend(a[b]);this.map.fitBounds(d)},this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b)),c&&c()},this.getElement=function(){return this.el},this.zoomIn=function(a){a=a||1,this.zoom=this.map.getZoom()+a,this.map.setZoom(this.zoom)},this.zoomOut=function(a){a=a||1,this.zoom=this.map.getZoom()-a,this.map.setZoom(this.zoom)};var J,K=[];for(J in this.map)"function"!=typeof this.map[J]||this[J]||K.push(J);for(f=0;f<K.length;f++)(function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}})(this,this.map,K[f])};return c}(this);k.prototype.createControl=function(a){var b=document.createElement("div");for(var c in b.style.cursor="pointer",!0!==a.disableDefaultStyles&&(b.style.fontFamily="Roboto, Arial, sans-serif",b.style.fontSize="11px",b.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"),a.style)b.style[c]=a.style[c];for(var d in a.id&&(b.id=a.id),a.title&&(b.title=a.title),a.classes&&(b.className=a.classes),a.content&&("string"==typeof a.content?b.innerHTML=a.content:a.content instanceof HTMLElement&&b.appendChild(a.content)),a.position&&(b.position=google.maps.ControlPosition[a.position.toUpperCase()]),a.events)(function(b,c){google.maps.event.addDomListener(b,c,function(){a.events[c].apply(this,[this])})})(b,d);return b.index=1,b},k.prototype.addControl=function(a){var b=this.createControl(a);return this.controls.push(b),this.map.controls[b.position].push(b),b},k.prototype.removeControl=function(a){var b,c=null;for(b=0;b<this.controls.length;b++)this.controls[b]==a&&(c=this.controls[b].position,this.controls.splice(b,1));if(c)for(b=0;b<this.map.controls.length;b++){var d=this.map.controls[a.position];if(d.getAt(b)==a){d.removeAt(b);break}}return a},k.prototype.createMarker=function(b){if(null==b.lat&&null==b.lng&&null==b.position)throw"No latitude or longitude defined.";var c=this,d=b.details,f=b.fences,g=b.outside,h={position:new google.maps.LatLng(b.lat,b.lng),map:null},i=a(h,b);delete i.lat,delete i.lng,delete i.fences,delete i.outside;var j=new google.maps.Marker(i);if(j.fences=f,b.infoWindow){j.infoWindow=new google.maps.InfoWindow(b.infoWindow);for(var k=["closeclick","content_changed","domready","position_changed","zindex_changed"],l=0;l<k.length;l++)(function(a,c){b.infoWindow[c]&&google.maps.event.addListener(a,c,function(a){b.infoWindow[c].apply(this,[a])})})(j.infoWindow,k[l])}for(var m=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],n=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],l=0;l<m.length;l++)(function(a,c){b[c]&&google.maps.event.addListener(a,c,function(){b[c].apply(this,[this])})})(j,m[l]);for(var l=0;l<n.length;l++)(function(a,c,d){b[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=a.getProjection().fromLatLngToPoint(c.latLng)),b[d].apply(this,[c])})})(this.map,j,n[l]);return google.maps.event.addListener(j,"click",function(){this.details=d,b.click&&b.click.apply(this,[this]),j.infoWindow&&(c.hideInfoWindows(),j.infoWindow.open(c.map,j))}),google.maps.event.addListener(j,"rightclick",function(a){a.marker=this,b.rightclick&&b.rightclick.apply(this,[a]),null!=window.context_menu[c.el.id].marker&&c.buildContextMenu("marker",a)}),j.fences&&google.maps.event.addListener(j,"dragend",function(){c.checkMarkerGeofence(j,function(a,b){g(a,b)})}),j},k.prototype.addMarker=function(a){var b;if(a.hasOwnProperty("gm_accessors_"))b=a;else if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position)b=this.createMarker(a);else throw"No latitude or longitude defined.";return b.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(b),this.markers.push(b),k.fire("marker_added",b,this),b},k.prototype.addMarkers=function(a){for(var b,c=0;b=a[c];c++)this.addMarker(b);return this.markers},k.prototype.hideInfoWindows=function(){for(var a,b=0;a=this.markers[b];b++)a.infoWindow&&a.infoWindow.close()},k.prototype.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===a){this.markers[b].setMap(null),this.markers.splice(b,1),this.markerClusterer&&this.markerClusterer.removeMarker(a),k.fire("marker_removed",a,this);break}return a},k.prototype.removeMarkers=function(a){var b=[];if("undefined"==typeof a){for(var c,d=0;d<this.markers.length;d++)c=this.markers[d],c.setMap(null),k.fire("marker_removed",c,this);this.markerClusterer&&this.markerClusterer.clearMarkers&&this.markerClusterer.clearMarkers(),this.markers=b}else{for(var f,d=0;d<a.length;d++)if(f=this.markers.indexOf(a[d]),-1<f){var c=this.markers[f];c.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(c),k.fire("marker_removed",c,this)}for(var c,d=0;d<this.markers.length;d++)c=this.markers[d],null!=c.getMap()&&b.push(c);this.markers=b}},k.prototype.drawOverlay=function(a){var b=new google.maps.OverlayView,c=!0;return b.setMap(this.map),null!=a.auto_show&&(c=a.auto_show),b.onAdd=function(){var c=document.createElement("div");c.style.borderStyle="none",c.style.borderWidth="0px",c.style.position="absolute",c.style.zIndex=100,c.innerHTML=a.content,b.el=c,a.layer||(a.layer="overlayLayer");var d=this.getPanes(),f=d[a.layer],g=["contextmenu","DOMMouseScroll","dblclick","mousedown"];f.appendChild(c);for(var h=0;h<g.length;h++)(function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})})(c,g[h]);a.click&&(d.overlayMouseTarget.appendChild(b.el),google.maps.event.addDomListener(b.el,"click",function(){a.click.apply(b,[b])})),google.maps.event.trigger(this,"ready")},b.draw=function(){var d=this.getProjection(),f=d.fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0,a.verticalOffset=a.verticalOffset||0;var g=b.el,h=g.children[0],i=h.clientHeight,j=h.clientWidth;switch(a.verticalAlign){case"top":g.style.top=f.y-i+a.verticalOffset+"px";break;default:case"middle":g.style.top=f.y-i/2+a.verticalOffset+"px";break;case"bottom":g.style.top=f.y+a.verticalOffset+"px";}switch(a.horizontalAlign){case"left":g.style.left=f.x-j+a.horizontalOffset+"px";break;default:case"center":g.style.left=f.x-j/2+a.horizontalOffset+"px";break;case"right":g.style.left=f.x+a.horizontalOffset+"px";}g.style.display=c?"block":"none",c||a.show.apply(this,[g])},b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),b.el=null)},this.overlays.push(b),b},k.prototype.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null),this.overlays.splice(b,1);break}},k.prototype.removeOverlays=function(){for(var a,b=0;a=this.overlays[b];b++)a.setMap(null);this.overlays=[]},k.prototype.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var d,f=0;d=c[f];f++)b.push(new google.maps.LatLng(d[0],d[1]));var g={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(g.clickable=a.clickable),a.hasOwnProperty("editable")&&(g.editable=a.editable),a.hasOwnProperty("icons")&&(g.icons=a.icons),a.hasOwnProperty("zIndex")&&(g.zIndex=a.zIndex);for(var h=new google.maps.Polyline(g),j=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],l=0;l<j.length;l++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(h,j[l]);return this.polylines.push(h),k.fire("polyline_added",h,this),h},k.prototype.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===a){this.polylines[b].setMap(null),this.polylines.splice(b,1),k.fire("polyline_removed",a,this);break}},k.prototype.removePolylines=function(){for(var a,b=0;a=this.polylines[b];b++)a.setMap(null);this.polylines=[]},k.prototype.drawCircle=function(b){b=a({map:this.map,center:new google.maps.LatLng(b.lat,b.lng)},b),delete b.lat,delete b.lng;for(var c=new google.maps.Circle(b),d=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],f=0;f<d.length;f++)(function(a,c){b[c]&&google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(c,d[f]);return this.polygons.push(c),c},k.prototype.drawRectangle=function(b){b=a({map:this.map},b);var c=new google.maps.LatLngBounds(new google.maps.LatLng(b.bounds[0][0],b.bounds[0][1]),new google.maps.LatLng(b.bounds[1][0],b.bounds[1][1]));b.bounds=c;for(var d=new google.maps.Rectangle(b),f=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],g=0;g<f.length;g++)(function(a,c){b[c]&&google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(d,f[g]);return this.polygons.push(d),d},k.prototype.drawPolygon=function(d){var g=!1;d.hasOwnProperty("useGeoJSON")&&(g=d.useGeoJSON),delete d.useGeoJSON,d=a({map:this.map},d),!1==g&&(d.paths=[d.paths.slice(0)]),0<d.paths.length&&0<d.paths[0].length&&(d.paths=c(b(d.paths,f,g)));for(var h=new google.maps.Polygon(d),i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],j=0;j<i.length;j++)(function(a,b){d[b]&&google.maps.event.addListener(a,b,function(a){d[b].apply(this,[a])})})(h,i[j]);return this.polygons.push(h),k.fire("polygon_added",h,this),h},k.prototype.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null),this.polygons.splice(b,1),k.fire("polygon_removed",a,this);break}},k.prototype.removePolygons=function(){for(var a,b=0;a=this.polygons[b];b++)a.setMap(null);this.polygons=[]},k.prototype.getFromFusionTables=function(a){var b=a.events;delete a.events;var c=new google.maps.FusionTablesLayer(a);for(var d in b)(function(a,c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(c,d);return this.layers.push(c),c},k.prototype.loadFromFusionTables=function(a){var b=this.getFromFusionTables(a);return b.setMap(this.map),b},k.prototype.getFromKML=function(a){var b=a.url,c=a.events;delete a.url,delete a.events;var d=new google.maps.KmlLayer(b,a);for(var f in c)(function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])})})(d,f);return this.layers.push(d),d},k.prototype.loadFromKML=function(a){var b=this.getFromKML(a);return b.setMap(this.map),b},k.prototype.addLayer=function(a,b){b=b||{};var c;switch(a){case"weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer,c.setTag(b.filter),delete b.filter,b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a),delete b.click});break;case"places":if(this.singleLayers.places=c=new google.maps.places.PlacesService(this.map),b.search||b.nearbySearch||b.radarSearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.radarSearch&&c.radarSearch(d,b.radarSearch),b.search&&c.search(d,b.search),b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}if(b.textSearch){var f={bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null};c.textSearch(f,b.textSearch)}}if(void 0!==c)return"function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c},k.prototype.removeLayer=function(a){if("string"==typeof a&&void 0!==this.singleLayers[a])this.singleLayers[a].setMap(null),delete this.singleLayers[a];else for(var b=0;b<this.layers.length;b++)if(this.layers[b]===a){this.layers[b].setMap(null),this.layers.splice(b,1);break}};var l,m;return k.prototype.getRoutes=function(b){switch(b.travelMode){case"bicycling":l=google.maps.TravelMode.BICYCLING;break;case"transit":l=google.maps.TravelMode.TRANSIT;break;case"driving":l=google.maps.TravelMode.DRIVING;break;default:l=google.maps.TravelMode.WALKING;}m="imperial"===b.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var c=a({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},b);c.origin=/string/.test(typeof b.origin)?b.origin:new google.maps.LatLng(b.origin[0],b.origin[1]),c.destination=/string/.test(typeof b.destination)?b.destination:new google.maps.LatLng(b.destination[0],b.destination[1]),c.travelMode=l,c.unitSystem=m,delete c.callback,delete c.error;var d=this,f=[],g=new google.maps.DirectionsService;g.route(c,function(a,c){if(c===google.maps.DirectionsStatus.OK){for(var d in a.routes)a.routes.hasOwnProperty(d)&&f.push(a.routes[d]);b.callback&&b.callback(f,a,c)}else b.error&&b.error(a,c)})},k.prototype.removeRoutes=function(){this.routes.length=0},k.prototype.getElevations=function(d){d=a({locations:[],path:!1,samples:256},d),0<d.locations.length&&0<d.locations[0].length&&(d.locations=c(b([d.locations],f,!1)));var g=d.callback;delete d.callback;var h=new google.maps.ElevationService;if(!d.path)delete d.path,delete d.samples,h.getElevationForLocations(d,function(a,b){g&&"function"==typeof g&&g(a,b)});else{var i={path:d.locations,samples:d.samples};h.getElevationAlongPath(i,function(a,b){g&&"function"==typeof g&&g(a,b)})}},k.prototype.cleanRoute=k.prototype.removePolylines,k.prototype.renderRoute=function(b,c){var d,f=this,g="string"==typeof c.panel?document.getElementById(c.panel.replace("#","")):c.panel;c.panel=g,c=a({map:this.map},c),d=new google.maps.DirectionsRenderer(c),this.getRoutes({origin:b.origin,destination:b.destination,travelMode:b.travelMode,waypoints:b.waypoints,unitSystem:b.unitSystem,error:b.error,avoidHighways:b.avoidHighways,avoidTolls:b.avoidTolls,optimizeWaypoints:b.optimizeWaypoints,callback:function(a,b,c){c===google.maps.DirectionsStatus.OK&&d.setDirections(b)}})},k.prototype.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,avoidHighways:a.avoidHighways,avoidTolls:a.avoidTolls,optimizeWaypoints:a.optimizeWaypoints,callback:function(c){if(0<c.length){var d={path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(d.icons=a.icons),b.drawPolyline(d),a.callback&&a.callback(c[c.length-1])}}})},k.prototype.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,callback:function(b){if(0<b.length&&a.start&&a.start(b[b.length-1]),0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var d,f=c.legs[0].steps,g=0;d=f[g];g++)d.step_number=g,a.step(d,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b,c=a.route.legs[0].steps,d=0;b=c[d];d++)b.step_number=d,a.step(b)},k.prototype.drawSteppedRoute=function(a){var b=this;if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,error:a.error,callback:function(c){if(0<c.length&&a.start&&a.start(c[c.length-1]),0<c.length&&a.step){var d=c[c.length-1];if(0<d.legs.length)for(var f,g=d.legs[0].steps,h=0;f=g[h];h++){f.step_number=h;var j={path:f.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(j.icons=a.icons),b.drawPolyline(j),a.step(f,d.legs[0].steps.length-1)}}0<c.length&&a.end&&a.end(c[c.length-1])}});else if(a.route&&0<a.route.legs.length)for(var c,d=a.route.legs[0].steps,f=0;c=d[f];f++){c.step_number=f;var g={path:c.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(g.icons=a.icons),b.drawPolyline(g),a.step(c)}},k.Route=function(a){this.origin=a.origin,this.destination=a.destination,this.waypoints=a.waypoints,this.map=a.map,this.route=a.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length;var b={path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(b.icons=a.icons),this.polyline=this.map.drawPolyline(b).getPath()},k.Route.prototype.getRoute=function(a){var b=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:a.travelMode,waypoints:this.waypoints||[],error:a.error,callback:function(){b.route=e[0],a.callback&&a.callback.call(b)}})},k.Route.prototype.back=function(){if(0<this.step_count){this.step_count--;var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.pop()}},k.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path;for(var b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}},k.prototype.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))},k.prototype.checkMarkerGeofence=function(a,b){if(a.fences)for(var c,d,f=0;c=a.fences[f];f++)d=a.getPosition(),this.checkGeofence(d.lat(),d.lng(),c)||b(a,c)},k.prototype.toImage=function(a){var a=a||{},b={};if(b.size=a.size||[this.el.clientWidth,this.el.clientHeight],b.lat=this.getCenter().lat(),b.lng=this.getCenter().lng(),0<this.markers.length){b.markers=[];for(var c=0;c<this.markers.length;c++)b.markers.push({lat:this.markers[c].getPosition().lat(),lng:this.markers[c].getPosition().lng()})}if(0<this.polylines.length){var d=this.polylines[0];b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(d.getPath()),b.polyline.strokeColor=d.strokeColor,b.polyline.strokeOpacity=d.strokeOpacity,b.polyline.strokeWeight=d.strokeWeight}return k.staticMapURL(b)},k.staticMapURL=function(a){function b(a,b){if("#"===a[0]&&(a=a.replace("#","0x"),b)){if(b=parseFloat(b),b=Math.min(1,Math.max(b,0)),0===b)return"0x00000000";b=(255*b).toString(16),1===b.length&&(b+=b),a=a.slice(0,8)+b}return a}var c,d=[],f=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";a.url&&(f=a.url,delete a.url),f+="?";var g=a.markers;delete a.markers,!g&&a.marker&&(g=[a.marker],delete a.marker);var h=a.styles;delete a.styles;var k=a.polyline;if(delete a.polyline,a.center)d.push("center="+a.center),delete a.center;else if(a.address)d.push("center="+a.address),delete a.address;else if(a.lat)d.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var l=encodeURI(a.visible.join("|"));d.push("visible="+l)}var m=a.size;m?(m.join&&(m=m.join("x")),delete a.size):m="630x300",d.push("size="+m),a.zoom||!1===a.zoom||(a.zoom=15);var n=!a.hasOwnProperty("sensor")||!!a.sensor;for(var o in delete a.sensor,d.push("sensor="+n),a)a.hasOwnProperty(o)&&d.push(o+"="+a[o]);if(g)for(var q,r,s=0;c=g[s];s++){for(var o in q=[],c.size&&"normal"!==c.size?(q.push("size:"+c.size),delete c.size):c.icon&&(q.push("icon:"+encodeURI(c.icon)),delete c.icon),c.color&&(q.push("color:"+c.color.replace("#","0x")),delete c.color),c.label&&(q.push("label:"+c.label[0].toUpperCase()),delete c.label),r=c.address?c.address:c.lat+","+c.lng,delete c.address,delete c.lat,delete c.lng,c)c.hasOwnProperty(o)&&q.push(o+":"+c[o]);q.length||0===s?(q.push(r),q=q.join("|"),d.push("markers="+encodeURI(q))):(q=d.pop()+encodeURI("|"+r),d.push(q))}if(h)for(var t,s=0;s<h.length;s++){t=[],h[s].featureType&&t.push("feature:"+h[s].featureType.toLowerCase()),h[s].elementType&&t.push("element:"+h[s].elementType.toLowerCase());for(var u=0;u<h[s].stylers.length;u++)for(var v in h[s].stylers[u]){var p=h[s].stylers[u][v];("hue"==v||"color"==v)&&(p="0x"+p.substring(1)),t.push(v+":"+p)}var w=t.join("|");""!=w&&d.push("style="+w)}if(k){if(c=k,k=[],c.strokeWeight&&k.push("weight:"+parseInt(c.strokeWeight,10)),c.strokeColor){var x=b(c.strokeColor,c.strokeOpacity);k.push("color:"+x)}if(c.fillColor){var y=b(c.fillColor,c.fillOpacity);k.push("fillcolor:"+y)}var z=c.path;if(z.join)for(var A,u=0;A=z[u];u++)k.push(A.join(","));else k.push("enc:"+z);k=k.join("|"),d.push("path="+encodeURI(k))}var B=window.devicePixelRatio||1;return d.push("scale="+B),d=d.join("&"),f+d},k.prototype.addMapType=function(a,b){if(b.hasOwnProperty("getTileUrl")&&"function"==typeof b.getTileUrl){b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)}else throw"'getTileUrl' function required."},k.prototype.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&"function"==typeof a.getTile){var b=a.index;delete a.index,this.map.overlayMapTypes.insertAt(b,a)}else throw"'getTile' function required."},k.prototype.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)},k.prototype.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,{name:a.styledMapName});this.map.mapTypes.set(a.mapTypeId,b)},k.prototype.setStyle=function(a){this.map.setMapTypeId(a)},k.prototype.createPanorama=function(a){return a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng()),this.panorama=k.createPanorama(a),this.map.setStreetView(this.panorama),this.panorama},k.createPanorama=function(b){var c=h(b.el,b.context);b.position=new google.maps.LatLng(b.lat,b.lng),delete b.el,delete b.context,delete b.lat,delete b.lng;for(var d=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],f=a({visible:!0},b),g=0;g<d.length;g++)delete f[d[g]];for(var j=new google.maps.StreetViewPanorama(c,f),g=0;g<d.length;g++)(function(a,c){b[c]&&google.maps.event.addListener(a,c,function(){b[c].apply(this)})})(j,d[g]);return j},k.prototype.on=function(a,b){return k.on(a,this,b)},k.prototype.off=function(a){k.off(a,this)},k.prototype.once=function(a,b){return k.once(a,this,b)},k.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],k.on=function(a,b,c){if(-1==k.custom_events.indexOf(a))return b instanceof k&&(b=b.map),google.maps.event.addListener(b,a,c);var d={handler:c,eventName:a};return b.registered_events[a]=b.registered_events[a]||[],b.registered_events[a].push(d),d},k.off=function(a,b){-1==k.custom_events.indexOf(a)?(b instanceof k&&(b=b.map),google.maps.event.clearListeners(b,a)):b.registered_events[a]=[]},k.once=function(a,b,c){if(-1==k.custom_events.indexOf(a))return b instanceof k&&(b=b.map),google.maps.event.addListenerOnce(b,a,c)},k.fire=function(a,b,c){if(-1==k.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var d=c.registered_events[a],f=0;f<d.length;f++)(function(a,b,c){a.apply(b,[c])})(d[f].handler,c,b)},k.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c),b&&b()},function(c){a.error(c),b&&b()},a.options):(a.not_supported(),b&&b())},k.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng)),delete a.lat,delete a.lng,delete a.callback,this.geocoder.geocode(a,function(a,c){b(a,c)})},"object"==typeof window.google&&window.google.maps&&(!google.maps.Polygon.prototype.getBounds&&(google.maps.Polygon.prototype.getBounds=function(){for(var a,b=new google.maps.LatLngBounds,c=this.getPaths(),d=0;d<c.getLength();d++){a=c.getAt(d);for(var f=0;f<a.getLength();f++)b.extend(a.getAt(f))}return b}),!google.maps.Polygon.prototype.containsLatLng&&(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var c=!1,d=this.getPaths().getLength(),f=0;f<d;f++)for(var g=this.getPaths().getAt(f),h=g.getLength(),k=h-1,l=0;l<h;l++){var m=g.getAt(l),n=g.getAt(k);(m.lng()<a.lng()&&n.lng()>=a.lng()||n.lng()<a.lng()&&m.lng()>=a.lng())&&m.lat()+(a.lng()-m.lng())/(n.lng()-m.lng())*(n.lat()-m.lat())<a.lat()&&(c=!c),k=l}return c}),!google.maps.Circle.prototype.containsLatLng&&(google.maps.Circle.prototype.containsLatLng=function(a){return!google.maps.geometry||google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),a)<=this.getRadius()}),google.maps.Rectangle.prototype.containsLatLng=function(a){return this.getBounds().contains(a)},google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)},google.maps.Marker.prototype.setFences=function(a){this.fences=a},google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)},google.maps.Marker.prototype.getId=function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(1<arguments.length&&(d=+arguments[1],d==d?0!=d&&d!=1/0&&d!=-Infinity&&(d=(0<d||-1)*Math.floor(Math.abs(d))):d=0),d>=c)return-1;for(var f=0<=d?d:Math.max(c-Math.abs(d),0);f<c;f++)if(f in b&&b[f]===a)return f;return-1}),k});